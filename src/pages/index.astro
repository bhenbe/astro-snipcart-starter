---
import Product from '../components/Product.astro';
import GetDeliveryDates from '../functions/GetDeliveryDates.js';

let title = 'My Astro Site';
let snipcart_public_key = import.meta.env.PUBLIC_SNIPCARTAPI;
let dates = GetDeliveryDates();
---
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>{title}</title>

	<link rel="preconnect" href="https://app.snipcart.com" />
	<link rel="preconnect" href="https://cdn.snipcart.com" />
	<link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.css" />


	<link rel="icon" type="image/x-icon" href="/favicon.ico" />
	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body>
	<main class="container py-5">
		<header>
			<h1>My shop</h1>
		</header>

		<div class="row mb-5">
			<div class="col-md-4">
				<Product id="chicken-tenders"
						name="Tenders"
						description="Succulentes ailes de poulet préparées"
						price="9.99"
						image="./assets/img/fried-chicken-wings.jpg"
						url="/" />
			</div>
		</div>

		<button class="btn btn-primary snipcart-checkout">Passer commande</button>

	</main>

	<script async src="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.js"></script>
	<div hidden id="snipcart" data-api-key={snipcart_public_key} data-config-modal-style="side">
		<billing section="bottom">
			<fieldset class="snipcart-form__set">
				<div class="snipcart-form__field">
					<div class="snipcart-form__field-select">
						<snipcart-label for="deliveryDate" class="snipcart__font--tiny">
							Date de retrait en magasin
						</snipcart-label>
						<snipcart-select name="deliveryDate" class="snipcart-form__select  snipcart__font--secondary snipcart__font--bold">
							{dates.map((date) => (
								<option value={date}>{date}</option>
							))}
						</snipcart-select>
					</div>
				</div>
			</fieldset>
		</billing>
	</div>
</body>
</html>